<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Lesson 7 Exploratory analysis |  Data Science for Social Scientists: An applied course using IPUMS data  </title>
  <meta name="description" content="This is an open source book. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.30 and GitBook 2.6.7" />

  <meta property="og:title" content="Lesson 7 Exploratory analysis |  Data Science for Social Scientists: An applied course using IPUMS data  " />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is an open source book. The output format for this example is bookdown::gitbook." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Lesson 7 Exploratory analysis |  Data Science for Social Scientists: An applied course using IPUMS data  " />
  
  <meta name="twitter:description" content="This is an open source book. The output format for this example is bookdown::gitbook." />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="lesson-6-introduction-to-ipums.html"/>
<link rel="next" href="lesosn-8-hypothesis-testing.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Beginning of a Syllabus</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-is-ipums"><i class="fa fa-check"></i>What is IPUMS</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#why-make-this-course"><i class="fa fa-check"></i>Why make this course</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#getting-started"><i class="fa fa-check"></i>Getting Started</a></li>
<li class="chapter" data-level="" data-path="course-description.html"><a href="course-description.html"><i class="fa fa-check"></i>Course Description</a>
<ul>
<li class="chapter" data-level="" data-path="course-description.html"><a href="course-description.html#course-aims"><i class="fa fa-check"></i>Course Aims</a></li>
<li class="chapter" data-level="" data-path="course-description.html"><a href="course-description.html#learning-outcomes"><i class="fa fa-check"></i>Learning Outcomes</a></li>
<li class="chapter" data-level="" data-path="course-description.html"><a href="course-description.html#guiding-principles"><i class="fa fa-check"></i>Guiding Principles</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="syllabus---general.html"><a href="syllabus---general.html"><i class="fa fa-check"></i>Syllabus - General</a></li>
<li class="chapter" data-level="" data-path="syllabus---detailed.html"><a href="syllabus---detailed.html"><i class="fa fa-check"></i>Syllabus - Detailed</a>
<ul>
<li class="chapter" data-level="" data-path="syllabus---detailed.html"><a href="syllabus---detailed.html#unit-1-understanding-and-testing-data"><i class="fa fa-check"></i>Unit 1 Understanding and Testing Data</a></li>
<li class="chapter" data-level="" data-path="syllabus---detailed.html"><a href="syllabus---detailed.html#unit-2-finding-data-and-asking-questions-using-ipums-data"><i class="fa fa-check"></i>Unit 2 Finding Data and Asking Questions (Using IPUMS Data)</a></li>
<li class="chapter" data-level="" data-path="syllabus---detailed.html"><a href="syllabus---detailed.html#unit-3-discussing-data-and-student-research"><i class="fa fa-check"></i>Unit 3 Discussing Data and Student Research</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="unit-1-the-basics.html"><a href="unit-1-the-basics.html"><i class="fa fa-check"></i>Unit 1: The Basics</a>
<ul>
<li class="chapter" data-level="" data-path="unit-wide-glossary.html"><a href="unit-wide-glossary.html"><i class="fa fa-check"></i>Unit-wide Glossary</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="what-is-data.html"><a href="what-is-data.html"><i class="fa fa-check"></i><b>1</b> What <em>is</em> data?</a>
<ul>
<li class="chapter" data-level="1.1" data-path="pov.html"><a href="pov.html"><i class="fa fa-check"></i><b>1.1</b> POV:</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="pov.html"><a href="pov.html#activity---collect-data-on-height"><i class="fa fa-check"></i><b>1.1.1</b> ACTIVITY - collect data on height</a></li>
<li class="chapter" data-level="1.1.2" data-path="pov.html"><a href="pov.html#activity---collect-data-on-birth-month"><i class="fa fa-check"></i><b>1.1.2</b> ACTIVITY - collect data on birth month</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="explore.html"><a href="explore.html"><i class="fa fa-check"></i><b>1.2</b> Explore</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="explore.html"><a href="explore.html#example-datasets"><i class="fa fa-check"></i><b>1.2.1</b> Example Datasets</a></li>
<li class="chapter" data-level="1.2.2" data-path="explore.html"><a href="explore.html#activity---calculate-by-hand"><i class="fa fa-check"></i><b>1.2.2</b> ACTIVITY - Calculate by hand</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="explain.html"><a href="explain.html"><i class="fa fa-check"></i><b>1.3</b> Explain</a></li>
<li class="chapter" data-level="1.4" data-path="ellaborate.html"><a href="ellaborate.html"><i class="fa fa-check"></i><b>1.4</b> Ellaborate</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="ellaborate.html"><a href="ellaborate.html#so-what-is-data"><i class="fa fa-check"></i><b>1.4.1</b> So what is data?</a></li>
<li class="chapter" data-level="1.4.2" data-path="ellaborate.html"><a href="ellaborate.html#collecting-data"><i class="fa fa-check"></i><b>1.4.2</b> Collecting Data</a></li>
<li class="chapter" data-level="1.4.3" data-path="ellaborate.html"><a href="ellaborate.html#populations-and-sampling"><i class="fa fa-check"></i><b>1.4.3</b> POPULATIONS AND SAMPLING</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="evaluation.html"><a href="evaluation.html"><i class="fa fa-check"></i><b>1.5</b> Evaluation</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="evaluation.html"><a href="evaluation.html#review-questions"><i class="fa fa-check"></i><b>1.5.1</b> Review Questions</a></li>
<li class="chapter" data-level="1.5.2" data-path="evaluation.html"><a href="evaluation.html#exercises"><i class="fa fa-check"></i><b>1.5.2</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="glossary.html"><a href="glossary.html"><i class="fa fa-check"></i>Glossary</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro-to-r-data-types-data-structures.html"><a href="intro-to-r-data-types-data-structures.html"><i class="fa fa-check"></i><b>2</b> Intro to R, data types, data structures</a>
<ul>
<li class="chapter" data-level="2.1" data-path="engage.html"><a href="engage.html"><i class="fa fa-check"></i><b>2.1</b> Engage</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="engage.html"><a href="engage.html#r-vs-rstudio"><i class="fa fa-check"></i><b>2.1.1</b> R vs RStudio</a></li>
<li class="chapter" data-level="2.1.2" data-path="engage.html"><a href="engage.html#orientation-to-rstudio"><i class="fa fa-check"></i><b>2.1.2</b> Orientation to RStudio</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="explore---interacting-with-r-objects.html"><a href="explore---interacting-with-r-objects.html"><i class="fa fa-check"></i><b>2.2</b> Explore - Interacting with R objects</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="explore---interacting-with-r-objects.html"><a href="explore---interacting-with-r-objects.html#load-the-data"><i class="fa fa-check"></i><b>2.2.1</b> Load the Data</a></li>
<li class="chapter" data-level="2.2.2" data-path="explore---interacting-with-r-objects.html"><a href="explore---interacting-with-r-objects.html#inspect-the-data"><i class="fa fa-check"></i><b>2.2.2</b> Inspect the Data</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="summarize-data.html"><a href="summarize-data.html"><i class="fa fa-check"></i>Summarize Data</a>
<ul>
<li class="chapter" data-level="" data-path="summarize-data.html"><a href="summarize-data.html#continuous-data"><i class="fa fa-check"></i>Continuous Data</a></li>
<li class="chapter" data-level="" data-path="summarize-data.html"><a href="summarize-data.html#all-in-summary"><i class="fa fa-check"></i>All in summary()</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="mode.html"><a href="mode.html"><i class="fa fa-check"></i><b>2.3</b> Mode</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="mode.html"><a href="mode.html#mode-code"><i class="fa fa-check"></i><b>2.3.1</b> Mode Code</a></li>
<li class="chapter" data-level="2.3.2" data-path="mode.html"><a href="mode.html#mode-results"><i class="fa fa-check"></i><b>2.3.2</b> Mode Results</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="visualizing-data.html"><a href="visualizing-data.html"><i class="fa fa-check"></i><b>2.4</b> Visualizing Data</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="visualizing-data.html"><a href="visualizing-data.html#continuous-data---boxplots"><i class="fa fa-check"></i><b>2.4.1</b> Continuous Data - Boxplots</a></li>
<li class="chapter" data-level="2.4.2" data-path="visualizing-data.html"><a href="visualizing-data.html#continuous-data---histograms"><i class="fa fa-check"></i><b>2.4.2</b> Continuous Data - Histograms</a></li>
<li class="chapter" data-level="2.4.3" data-path="visualizing-data.html"><a href="visualizing-data.html#categorical-data"><i class="fa fa-check"></i><b>2.4.3</b> Categorical Data</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="glossary-1.html"><a href="glossary-1.html"><i class="fa fa-check"></i>Glossary</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="comparing-data.html"><a href="comparing-data.html"><i class="fa fa-check"></i><b>3</b> Comparing Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-distributions.html"><a href="data-distributions.html"><i class="fa fa-check"></i><b>3.1</b> Data Distributions</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="data-distributions.html"><a href="data-distributions.html#normal-distributions"><i class="fa fa-check"></i><b>3.1.1</b> Normal Distributions</a></li>
<li class="chapter" data-level="3.1.2" data-path="data-distributions.html"><a href="data-distributions.html#what-is-normal"><i class="fa fa-check"></i><b>3.1.2</b> What <em>is</em> normal?</a></li>
<li class="chapter" data-level="3.1.3" data-path="data-distributions.html"><a href="data-distributions.html#skews"><i class="fa fa-check"></i><b>3.1.3</b> Skews</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="statisitcal-testing-of-simple-data-sets.html"><a href="statisitcal-testing-of-simple-data-sets.html"><i class="fa fa-check"></i><b>3.2</b> Statisitcal testing of simple data sets</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="statisitcal-testing-of-simple-data-sets.html"><a href="statisitcal-testing-of-simple-data-sets.html#t-tests-anova-chi2"><i class="fa fa-check"></i><b>3.2.1</b> t-tests, ANOVA, chi2</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="relationships-between-variables-in-simple-data-sets.html"><a href="relationships-between-variables-in-simple-data-sets.html"><i class="fa fa-check"></i><b>3.3</b> Relationships between variables in simple data sets</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="relationships-between-variables-in-simple-data-sets.html"><a href="relationships-between-variables-in-simple-data-sets.html#correlation-linear-regression"><i class="fa fa-check"></i><b>3.3.1</b> Correlation, Linear Regression</a></li>
<li class="chapter" data-level="3.3.2" data-path="relationships-between-variables-in-simple-data-sets.html"><a href="relationships-between-variables-in-simple-data-sets.html#genearlized-linear-model"><i class="fa fa-check"></i><b>3.3.2</b> Genearlized Linear Model</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="intro-to-rrstudio.html"><a href="intro-to-rrstudio.html"><i class="fa fa-check"></i><b>3.4</b> Intro to R/RStudio</a></li>
<li class="chapter" data-level="3.5" data-path="reading-data-distributions.html"><a href="reading-data-distributions.html"><i class="fa fa-check"></i><b>3.5</b> Reading Data / Distributions</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="reading-data-distributions.html"><a href="reading-data-distributions.html#what-is-a-normal-distribution"><i class="fa fa-check"></i><b>3.5.1</b> What <em>is</em> a <strong>normal distribution</strong></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="glossary-2.html"><a href="glossary-2.html"><i class="fa fa-check"></i>Glossary</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="unit-2-ipums.html"><a href="unit-2-ipums.html"><i class="fa fa-check"></i>Unit 2: IPUMS</a></li>
<li class="chapter" data-level="" data-path="unit-3-independent-research.html"><a href="unit-3-independent-research.html"><i class="fa fa-check"></i>Unit 3: Independent Research</a></li>
<li class="chapter" data-level="4" data-path="ex_code.html"><a href="ex_code.html"><i class="fa fa-check"></i><b>4</b> Example RMD code</a>
<ul>
<li class="chapter" data-level="4.1" data-path="core.html"><a href="core.html"><i class="fa fa-check"></i><b>4.1</b> Core</a></li>
<li class="chapter" data-level="4.2" data-path="tips.html"><a href="tips.html"><i class="fa fa-check"></i><b>4.2</b> Tips</a></li>
<li class="chapter" data-level="4.3" data-path="syntax.html"><a href="syntax.html"><i class="fa fa-check"></i><b>4.3</b> Syntax</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="syntax.html"><a href="syntax.html#math"><i class="fa fa-check"></i><b>4.3.1</b> Math</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/ehrlichd/stats_book" target="blank">A link to the github repo.</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"><p><img src="ipums_banner.png" /><br />
Data Science for Social Scientists:<br />
An applied course using IPUMS data <br></p></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="lesson-7-exploratory-analysis" class="section level2 unlisted unnumbered hasAnchor">
<h2>Lesson 7 Exploratory analysis<a href="lesson-7-exploratory-analysis.html#lesson-7-exploratory-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>If you’ve just collected a survey, or other raw data, you may not know what you’re looking for. This is perfectly ok but goes against <em>the scientific method</em> most people learned in grade school (More on that to follow(<strong><em>include_link</em></strong>)).</p>
<p>This unit begins by presenting data/distributions and asking students to begin interpreting the data . visual exploration is encouraged and basic of data manipulation are taught
* <em>EG:</em> how to subset data, how to reshape data, how to recode data, how to convert from one <code>data type</code> to another.</p>
<p>Example lab exercise:</p>
<p>Students given a data set (xls, csv, etc)
* load data, perform manipulations, basic summaries
+ cross tabs
+ group means by a covariate
* inspect data visually
+ <em>DESCRIBE</em> the distribution - is it normal? significant?
* <em>FIND</em> aquestion in the spread of the data
+ how can you test this (maybe small group work)
* write up/ present results
+ think on confounding factors / biases</p>
<div id="advanced-exploration---change-over-time" class="section level3 unnumbered hasAnchor">
<h3>Advanced Exploration - Change Over Time<a href="lesson-7-exploratory-analysis.html#advanced-exploration---change-over-time" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Here we demonstrate an approach to looking at how Family Structure (inferred from household relationships) has changed over time.</p>
<div id="setup-load-data" class="section level4 unnumbered hasAnchor">
<h4>Setup / Load Data<a href="lesson-7-exploratory-analysis.html#setup-load-data" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Install/update R packages</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="lesson-7-exploratory-analysis.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;ipumsr&quot;</span>)</span>
<span id="cb51-2"><a href="lesson-7-exploratory-analysis.html#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</span></code></pre></div>
<p>Data extract created online using the datacart system.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="lesson-7-exploratory-analysis.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ipumsr)</span>
<span id="cb52-2"><a href="lesson-7-exploratory-analysis.html#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb52-3"><a href="lesson-7-exploratory-analysis.html#cb52-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-4"><a href="lesson-7-exploratory-analysis.html#cb52-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-5"><a href="lesson-7-exploratory-analysis.html#cb52-5" aria-hidden="true" tabindex="-1"></a>ddi <span class="ot">&lt;-</span> <span class="fu">read_ipums_ddi</span>(<span class="st">&quot;Data/ipumsi_00005.xml&quot;</span>)</span>
<span id="cb52-6"><a href="lesson-7-exploratory-analysis.html#cb52-6" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read_ipums_micro</span>(ddi)</span></code></pre></div>
<div id="inspect-the-data-1" class="section level5 unnumbered hasAnchor">
<h5>Inspect the Data<a href="lesson-7-exploratory-analysis.html#inspect-the-data-1" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Using <code>haven</code> labeled values.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="lesson-7-exploratory-analysis.html#cb53-1" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>RELATE[<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>]</span>
<span id="cb53-2"><a href="lesson-7-exploratory-analysis.html#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(data<span class="sc">$</span>RELATE)</span>
<span id="cb53-3"><a href="lesson-7-exploratory-analysis.html#cb53-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-4"><a href="lesson-7-exploratory-analysis.html#cb53-4" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> <span class="fu">count</span>(RELATE)</span>
<span id="cb53-5"><a href="lesson-7-exploratory-analysis.html#cb53-5" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> <span class="fu">count</span>(SEX)</span></code></pre></div>
<p>What were those codes ??</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="lesson-7-exploratory-analysis.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="do">## need to convert this to an image or something similar; kable table?</span></span>
<span id="cb54-2"><a href="lesson-7-exploratory-analysis.html#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ipums_view</span>(ddi)</span></code></pre></div>
</div>
<div id="visualize" class="section level5 unnumbered hasAnchor">
<h5>Visualize<a href="lesson-7-exploratory-analysis.html#visualize" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>A simple plot</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="lesson-7-exploratory-analysis.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(AGE <span class="sc">~</span> YEAR, <span class="at">data =</span> data)</span></code></pre></div>
<p>A fancier plot</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="lesson-7-exploratory-analysis.html#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(AGE<span class="sc">~</span>YEAR, <span class="at">data =</span> data, <span class="at">type =</span> <span class="st">&quot;n&quot;</span>, <span class="at">main =</span> <span class="st">&quot;Age by Sex, over Time, CO&quot;</span>)</span>
<span id="cb56-2"><a href="lesson-7-exploratory-analysis.html#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(data<span class="sc">$</span>YEAR[data<span class="sc">$</span>SEX<span class="sc">==</span><span class="dv">1</span>]<span class="sc">-</span><span class="dv">1</span>, data<span class="sc">$</span>AGE[data<span class="sc">$</span>SEX<span class="sc">==</span><span class="dv">1</span>], <span class="at">pch =</span> <span class="dv">16</span>, <span class="at">col =</span> <span class="fu">hsv</span>(.<span class="dv">6</span>,.<span class="dv">6</span>,.<span class="dv">8</span>,.<span class="dv">2</span>))</span>
<span id="cb56-3"><a href="lesson-7-exploratory-analysis.html#cb56-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-4"><a href="lesson-7-exploratory-analysis.html#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(data<span class="sc">$</span>YEAR[data<span class="sc">$</span>SEX<span class="sc">==</span><span class="dv">2</span>]<span class="sc">+</span><span class="dv">1</span>, data<span class="sc">$</span>AGE[data<span class="sc">$</span>SEX<span class="sc">==</span><span class="dv">2</span>], <span class="at">pch =</span> <span class="dv">16</span>, <span class="at">col =</span> <span class="fu">hsv</span>(<span class="dv">1</span>,.<span class="dv">6</span>,.<span class="dv">8</span>,.<span class="dv">2</span>))</span>
<span id="cb56-5"><a href="lesson-7-exploratory-analysis.html#cb56-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-6"><a href="lesson-7-exploratory-analysis.html#cb56-6" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="fu">lm</span>(AGE<span class="sc">~</span>YEAR, <span class="at">data =</span> data), <span class="at">col =</span> <span class="st">&quot;green&quot;</span>)</span></code></pre></div>
</div>
<div id="asking-logical-questions" class="section level5 unnumbered hasAnchor">
<h5>Asking (logical) questions<a href="lesson-7-exploratory-analysis.html#asking-logical-questions" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Here we demonstrate how setting up logical questions can be used to easily filter/subset data.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="lesson-7-exploratory-analysis.html#cb57-1" aria-hidden="true" tabindex="-1"></a>age_test <span class="ot">&lt;-</span> data<span class="sc">$</span>AGE <span class="sc">&gt;</span> <span class="dv">18</span></span>
<span id="cb57-2"><a href="lesson-7-exploratory-analysis.html#cb57-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-3"><a href="lesson-7-exploratory-analysis.html#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(age_test)</span>
<span id="cb57-4"><a href="lesson-7-exploratory-analysis.html#cb57-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-5"><a href="lesson-7-exploratory-analysis.html#cb57-5" aria-hidden="true" tabindex="-1"></a>age_test</span></code></pre></div>
<p>Logical vectors are stored as <code>TRUE</code> or <code>FALSE</code>, but can also be evaluated numerically as <code>1</code> or <code>0</code> respectively. We can therefore <code>sum()</code> the number of <code>TRUE</code> values and divide by total rows for a proportion.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="lesson-7-exploratory-analysis.html#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(age_test)<span class="sc">/</span><span class="fu">nrow</span>(data)</span></code></pre></div>
</div>
<div id="hh-vs-persons" class="section level5 unnumbered hasAnchor">
<h5>HH vs persons<a href="lesson-7-exploratory-analysis.html#hh-vs-persons" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>A unique characteristic of census and some survey data is the nested-structure with individuals being grouped into households. Often times it is necessary to choose to work at the hh or person level, and data must be appropriately manipulated to fit that case.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="lesson-7-exploratory-analysis.html#cb59-1" aria-hidden="true" tabindex="-1"></a>hh_total <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(data<span class="sc">$</span>SERIAL))</span>
<span id="cb59-2"><a href="lesson-7-exploratory-analysis.html#cb59-2" aria-hidden="true" tabindex="-1"></a>hh_total</span>
<span id="cb59-3"><a href="lesson-7-exploratory-analysis.html#cb59-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ipums_view</span>(ddi)</span></code></pre></div>
</div>
</div>
<div id="nuclear-family" class="section level4 unnumbered hasAnchor">
<h4>Nuclear Family<a href="lesson-7-exploratory-analysis.html#nuclear-family" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>First we look at a nuclear family, comprising only parents and their immediate children.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="lesson-7-exploratory-analysis.html#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ipumsr)</span>
<span id="cb60-2"><a href="lesson-7-exploratory-analysis.html#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb60-3"><a href="lesson-7-exploratory-analysis.html#cb60-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-4"><a href="lesson-7-exploratory-analysis.html#cb60-4" aria-hidden="true" tabindex="-1"></a>ddi <span class="ot">&lt;-</span> <span class="fu">read_ipums_ddi</span>(<span class="st">&quot;/pkg/ipums/personal/ehrli097/AABA_2022/Data/ipumsi_00005.xml&quot;</span>)</span>
<span id="cb60-5"><a href="lesson-7-exploratory-analysis.html#cb60-5" aria-hidden="true" tabindex="-1"></a>all_data <span class="ot">&lt;-</span> <span class="fu">read_ipums_micro</span>(ddi)</span>
<span id="cb60-6"><a href="lesson-7-exploratory-analysis.html#cb60-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-7"><a href="lesson-7-exploratory-analysis.html#cb60-7" aria-hidden="true" tabindex="-1"></a>census_years <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1860</span>, <span class="dv">1870</span>, <span class="dv">1880</span>, <span class="dv">1900</span>, <span class="dv">1910</span>, <span class="dv">1960</span>, <span class="dv">1970</span>, <span class="dv">1980</span>, <span class="dv">1990</span>, <span class="dv">2000</span>, <span class="dv">2010</span>)</span>
<span id="cb60-8"><a href="lesson-7-exploratory-analysis.html#cb60-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-9"><a href="lesson-7-exploratory-analysis.html#cb60-9" aria-hidden="true" tabindex="-1"></a><span class="do">## subset census only</span></span>
<span id="cb60-10"><a href="lesson-7-exploratory-analysis.html#cb60-10" aria-hidden="true" tabindex="-1"></a>d2 <span class="ot">&lt;-</span> all_data <span class="sc">%&gt;%</span> <span class="fu">filter</span>(YEAR <span class="sc">%in%</span> census_years)</span>
<span id="cb60-11"><a href="lesson-7-exploratory-analysis.html#cb60-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-12"><a href="lesson-7-exploratory-analysis.html#cb60-12" aria-hidden="true" tabindex="-1"></a><span class="do">## make a household dataframe</span></span>
<span id="cb60-13"><a href="lesson-7-exploratory-analysis.html#cb60-13" aria-hidden="true" tabindex="-1"></a>hhs <span class="ot">&lt;-</span> d2 <span class="sc">%&gt;%</span> <span class="fu">distinct</span>(YEAR, SERIAL, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(YEAR,SERIAL,GEO1_US)</span>
<span id="cb60-14"><a href="lesson-7-exploratory-analysis.html#cb60-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-15"><a href="lesson-7-exploratory-analysis.html#cb60-15" aria-hidden="true" tabindex="-1"></a>hhs <span class="sc">%&gt;%</span> <span class="fu">View</span>()</span></code></pre></div>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="lesson-7-exploratory-analysis.html#cb61-1" aria-hidden="true" tabindex="-1"></a>hhs <span class="ot">&lt;-</span> d2 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(RELATE <span class="sc">==</span><span class="dv">4</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb61-2"><a href="lesson-7-exploratory-analysis.html#cb61-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb61-3"><a href="lesson-7-exploratory-analysis.html#cb61-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb61-4"><a href="lesson-7-exploratory-analysis.html#cb61-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(YEAR, SERIAL) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">extended_test=</span><span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> <span class="fu">right_join</span>(hhs, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;YEAR&quot;</span>, <span class="st">&quot;SERIAL&quot;</span>)) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">extended_test=</span><span class="fu">if_else</span>(<span class="fu">is.na</span>(extended_test),<span class="cn">FALSE</span>,<span class="cn">TRUE</span>))</span>
<span id="cb61-5"><a href="lesson-7-exploratory-analysis.html#cb61-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb61-6"><a href="lesson-7-exploratory-analysis.html#cb61-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-7"><a href="lesson-7-exploratory-analysis.html#cb61-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-8"><a href="lesson-7-exploratory-analysis.html#cb61-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-9"><a href="lesson-7-exploratory-analysis.html#cb61-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-10"><a href="lesson-7-exploratory-analysis.html#cb61-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-11"><a href="lesson-7-exploratory-analysis.html#cb61-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-12"><a href="lesson-7-exploratory-analysis.html#cb61-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-13"><a href="lesson-7-exploratory-analysis.html#cb61-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-14"><a href="lesson-7-exploratory-analysis.html#cb61-14" aria-hidden="true" tabindex="-1"></a>hhs <span class="ot">&lt;-</span> d2 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span>RELATE <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>) <span class="sc">|</span></span>
<span id="cb61-15"><a href="lesson-7-exploratory-analysis.html#cb61-15" aria-hidden="true" tabindex="-1"></a>                  (RELATE <span class="sc">==</span> <span class="dv">3</span> <span class="sc">&amp;</span></span>
<span id="cb61-16"><a href="lesson-7-exploratory-analysis.html#cb61-16" aria-hidden="true" tabindex="-1"></a>                     MARST <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>))</span>
<span id="cb61-17"><a href="lesson-7-exploratory-analysis.html#cb61-17" aria-hidden="true" tabindex="-1"></a>                ) <span class="sc">%&gt;%</span> </span>
<span id="cb61-18"><a href="lesson-7-exploratory-analysis.html#cb61-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-19"><a href="lesson-7-exploratory-analysis.html#cb61-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb61-20"><a href="lesson-7-exploratory-analysis.html#cb61-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb61-21"><a href="lesson-7-exploratory-analysis.html#cb61-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(YEAR, SERIAL) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">nuclear_test =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> <span class="fu">right_join</span>(hhs, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;YEAR&quot;</span>, <span class="st">&quot;SERIAL&quot;</span>)) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">nuclear_test =</span> <span class="fu">if_else</span>(<span class="fu">is.na</span>(nuclear_test), <span class="cn">TRUE</span>, <span class="cn">FALSE</span>))</span>
<span id="cb61-22"><a href="lesson-7-exploratory-analysis.html#cb61-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-23"><a href="lesson-7-exploratory-analysis.html#cb61-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-24"><a href="lesson-7-exploratory-analysis.html#cb61-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-25"><a href="lesson-7-exploratory-analysis.html#cb61-25" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(hhs<span class="sc">$</span>extended_test,hhs<span class="sc">$</span>nuclear_test)</span></code></pre></div>
<div id="tabulate-results" class="section level5 unnumbered hasAnchor">
<h5>Tabulate results<a href="lesson-7-exploratory-analysis.html#tabulate-results" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="lesson-7-exploratory-analysis.html#cb62-1" aria-hidden="true" tabindex="-1"></a>  hhs <span class="ot">&lt;-</span> d2 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(RELATED <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">4200</span>, <span class="dv">4210</span>, <span class="dv">4211</span>, <span class="dv">4220</span>, <span class="dv">4500</span>, <span class="dv">4510</span>, <span class="dv">4600</span>)) <span class="sc">%&gt;%</span> <span class="fu">distinct</span>(YEAR, SERIAL) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">parent_test=</span><span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> <span class="fu">right_join</span>(hhs, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;YEAR&quot;</span>, <span class="st">&quot;SERIAL&quot;</span>)) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">parent_test=</span><span class="fu">if_else</span>(<span class="fu">is.na</span>(parent_test),<span class="cn">FALSE</span>,<span class="cn">TRUE</span>))</span>
<span id="cb62-2"><a href="lesson-7-exploratory-analysis.html#cb62-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-3"><a href="lesson-7-exploratory-analysis.html#cb62-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-4"><a href="lesson-7-exploratory-analysis.html#cb62-4" aria-hidden="true" tabindex="-1"></a>  hhs <span class="ot">&lt;-</span> d2 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(RELATED <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">4100</span>, <span class="dv">4110</span>, <span class="dv">4120</span>, <span class="dv">4130</span>, <span class="dv">4300</span>, <span class="dv">4301</span>, <span class="dv">4302</span>)) <span class="sc">%&gt;%</span> <span class="fu">distinct</span>(YEAR, SERIAL) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">children_test=</span><span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> <span class="fu">right_join</span>(hhs, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;YEAR&quot;</span>, <span class="st">&quot;SERIAL&quot;</span>)) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">children_test=</span><span class="fu">if_else</span>(<span class="fu">is.na</span>(children_test),<span class="cn">FALSE</span>,<span class="cn">TRUE</span>))</span>
<span id="cb62-5"><a href="lesson-7-exploratory-analysis.html#cb62-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb62-6"><a href="lesson-7-exploratory-analysis.html#cb62-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb62-7"><a href="lesson-7-exploratory-analysis.html#cb62-7" aria-hidden="true" tabindex="-1"></a>  res_tabs <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb62-8"><a href="lesson-7-exploratory-analysis.html#cb62-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;nuclear_test&quot;</span> <span class="ot">=</span> hhs <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(YEAR, nuclear_test,GEO1_US) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">.groups=</span><span class="st">&quot;drop&quot;</span>,<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> <span class="fu">as.data.frame</span>(),</span>
<span id="cb62-9"><a href="lesson-7-exploratory-analysis.html#cb62-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;extended_test&quot;</span> <span class="ot">=</span> hhs <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(YEAR, extended_test, GEO1_US) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">.groups=</span><span class="st">&quot;drop&quot;</span>,<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> <span class="fu">as.data.frame</span>(),</span>
<span id="cb62-10"><a href="lesson-7-exploratory-analysis.html#cb62-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;parent_test&quot;</span> <span class="ot">=</span> hhs <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(YEAR, parent_test, GEO1_US) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">.groups=</span><span class="st">&quot;drop&quot;</span>,<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> <span class="fu">as.data.frame</span>(),</span>
<span id="cb62-11"><a href="lesson-7-exploratory-analysis.html#cb62-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;children_test&quot;</span> <span class="ot">=</span> hhs <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(YEAR, children_test, GEO1_US) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">.groups=</span><span class="st">&quot;drop&quot;</span>,<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> <span class="fu">as.data.frame</span>()</span>
<span id="cb62-12"><a href="lesson-7-exploratory-analysis.html#cb62-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb62-13"><a href="lesson-7-exploratory-analysis.html#cb62-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb62-14"><a href="lesson-7-exploratory-analysis.html#cb62-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb62-15"><a href="lesson-7-exploratory-analysis.html#cb62-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb62-16"><a href="lesson-7-exploratory-analysis.html#cb62-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb62-17"><a href="lesson-7-exploratory-analysis.html#cb62-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-18"><a href="lesson-7-exploratory-analysis.html#cb62-18" aria-hidden="true" tabindex="-1"></a>collapsed_results <span class="ot">&lt;-</span> res_tabs <span class="sc">%&gt;%</span> purrr<span class="sc">::</span><span class="fu">map</span>(<span class="cf">function</span>(x){</span>
<span id="cb62-19"><a href="lesson-7-exploratory-analysis.html#cb62-19" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> x <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(<span class="fu">across</span>(<span class="fu">names</span>(x)[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>])) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">.groups=</span><span class="st">&quot;drop&quot;</span>,<span class="at">n =</span> <span class="fu">sum</span>(n))</span>
<span id="cb62-20"><a href="lesson-7-exploratory-analysis.html#cb62-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-21"><a href="lesson-7-exploratory-analysis.html#cb62-21" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb62-22"><a href="lesson-7-exploratory-analysis.html#cb62-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-23"><a href="lesson-7-exploratory-analysis.html#cb62-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-24"><a href="lesson-7-exploratory-analysis.html#cb62-24" aria-hidden="true" tabindex="-1"></a>collapsed_results <span class="ot">&lt;-</span> <span class="fu">lapply</span>(collapsed_results, <span class="cf">function</span>(x){</span>
<span id="cb62-25"><a href="lesson-7-exploratory-analysis.html#cb62-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>(x)[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="st">&quot;test&quot;</span></span>
<span id="cb62-26"><a href="lesson-7-exploratory-analysis.html#cb62-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>(x)[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="st">&quot;state&quot;</span></span>
<span id="cb62-27"><a href="lesson-7-exploratory-analysis.html#cb62-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(x)</span>
<span id="cb62-28"><a href="lesson-7-exploratory-analysis.html#cb62-28" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb62-29"><a href="lesson-7-exploratory-analysis.html#cb62-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-30"><a href="lesson-7-exploratory-analysis.html#cb62-30" aria-hidden="true" tabindex="-1"></a>combined <span class="ot">&lt;-</span> collapsed_results <span class="sc">%&gt;%</span> purrr<span class="sc">::</span><span class="fu">reduce</span>(full_join, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;YEAR&quot;</span>, <span class="st">&quot;test&quot;</span>, <span class="st">&quot;state&quot;</span>))</span>
<span id="cb62-31"><a href="lesson-7-exploratory-analysis.html#cb62-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-32"><a href="lesson-7-exploratory-analysis.html#cb62-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-33"><a href="lesson-7-exploratory-analysis.html#cb62-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-34"><a href="lesson-7-exploratory-analysis.html#cb62-34" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(combined) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;YEAR&quot;</span>,<span class="st">&quot;test&quot;</span>, <span class="st">&quot;state&quot;</span>, <span class="st">&quot;n_nuclear&quot;</span>, <span class="st">&quot;n_extended&quot;</span>, <span class="st">&quot;n_parent&quot;</span>, <span class="st">&quot;n_children&quot;</span>)</span>
<span id="cb62-35"><a href="lesson-7-exploratory-analysis.html#cb62-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-36"><a href="lesson-7-exploratory-analysis.html#cb62-36" aria-hidden="true" tabindex="-1"></a>combined[<span class="fu">is.na</span>(combined)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb62-37"><a href="lesson-7-exploratory-analysis.html#cb62-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-38"><a href="lesson-7-exploratory-analysis.html#cb62-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-39"><a href="lesson-7-exploratory-analysis.html#cb62-39" aria-hidden="true" tabindex="-1"></a>to_plot <span class="ot">&lt;-</span> combined <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(YEAR, state) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">n_tot =</span> <span class="fu">sum</span>(n_nuclear)) <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">pct =</span>  <span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">&quot;n_&quot;</span>))<span class="sc">/</span>n_tot) <span class="sc">%&gt;%</span> <span class="fu">select</span>(YEAR,test,state,pct)</span></code></pre></div>
</div>
<div id="visualize-nuclear-families" class="section level5 unnumbered hasAnchor">
<h5>Visualize Nuclear Families<a href="lesson-7-exploratory-analysis.html#visualize-nuclear-families" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="lesson-7-exploratory-analysis.html#cb63-1" aria-hidden="true" tabindex="-1"></a>to_plot <span class="ot">&lt;-</span> to_plot <span class="sc">%&gt;%</span> <span class="fu">filter</span>(test<span class="sc">==</span><span class="cn">TRUE</span>)</span>
<span id="cb63-2"><a href="lesson-7-exploratory-analysis.html#cb63-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-3"><a href="lesson-7-exploratory-analysis.html#cb63-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-4"><a href="lesson-7-exploratory-analysis.html#cb63-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-5"><a href="lesson-7-exploratory-analysis.html#cb63-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(to_plot<span class="sc">$</span>YEAR, to_plot<span class="sc">$</span>pct<span class="sc">$</span>n_nuclear, <span class="at">col =</span> <span class="fu">hsv</span>(.<span class="dv">4</span>, .<span class="dv">6</span>,.<span class="dv">8</span>), <span class="at">pch =</span> <span class="dv">16</span>, <span class="at">ylim =</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>), <span class="at">xlab =</span> <span class="st">&quot;&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;prop of hhs&quot;</span>, <span class="at">main =</span> <span class="st">&quot;Nuclear HHs over time in CO&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="extended-family" class="section level4 unnumbered hasAnchor">
<h4>Extended Family<a href="lesson-7-exploratory-analysis.html#extended-family" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Next we look at hhs with extended families present. IE, any that contain more relationships than just Parent/Child/Sibling (between children only)</p>
<div id="gernerate-models" class="section level5 unnumbered hasAnchor">
<h5>Gernerate models<a href="lesson-7-exploratory-analysis.html#gernerate-models" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="lesson-7-exploratory-analysis.html#cb64-1" aria-hidden="true" tabindex="-1"></a>to_plot <span class="ot">&lt;-</span> to_plot <span class="sc">%&gt;%</span> <span class="fu">filter</span>(test<span class="sc">==</span><span class="cn">TRUE</span>)</span>
<span id="cb64-2"><a href="lesson-7-exploratory-analysis.html#cb64-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-3"><a href="lesson-7-exploratory-analysis.html#cb64-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-4"><a href="lesson-7-exploratory-analysis.html#cb64-4" aria-hidden="true" tabindex="-1"></a>glm_hist <span class="ot">&lt;-</span> <span class="fu">glm</span>(pct<span class="sc">$</span>n_extended <span class="sc">~</span> YEAR, <span class="at">data =</span> to_plot[to_plot<span class="sc">$</span>YEAR <span class="sc">&lt;</span> <span class="dv">1950</span>,], <span class="at">family =</span> <span class="fu">quasibinomial</span>(<span class="at">link=</span>logit))</span>
<span id="cb64-5"><a href="lesson-7-exploratory-analysis.html#cb64-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-6"><a href="lesson-7-exploratory-analysis.html#cb64-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-7"><a href="lesson-7-exploratory-analysis.html#cb64-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-8"><a href="lesson-7-exploratory-analysis.html#cb64-8" aria-hidden="true" tabindex="-1"></a>glm_hist_x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from=</span><span class="dv">1860</span>, <span class="at">to =</span> <span class="dv">1910</span>, <span class="at">length.out =</span> <span class="dv">100</span>)</span>
<span id="cb64-9"><a href="lesson-7-exploratory-analysis.html#cb64-9" aria-hidden="true" tabindex="-1"></a>glm_hist_y <span class="ot">&lt;-</span> <span class="fu">predict</span>(glm_hist, <span class="fu">list</span>(<span class="at">YEAR =</span> glm_hist_x), <span class="at">type =</span> <span class="st">&quot;response&quot;</span>)</span>
<span id="cb64-10"><a href="lesson-7-exploratory-analysis.html#cb64-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-11"><a href="lesson-7-exploratory-analysis.html#cb64-11" aria-hidden="true" tabindex="-1"></a>glm_mod <span class="ot">&lt;-</span> <span class="fu">glm</span>(pct<span class="sc">$</span>n_extended <span class="sc">~</span> YEAR, <span class="at">data =</span> to_plot[to_plot<span class="sc">$</span>YEAR<span class="sc">&gt;</span> <span class="dv">1950</span>,], <span class="at">family =</span> <span class="fu">quasibinomial</span>(<span class="at">link=</span>logit))</span>
<span id="cb64-12"><a href="lesson-7-exploratory-analysis.html#cb64-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-13"><a href="lesson-7-exploratory-analysis.html#cb64-13" aria-hidden="true" tabindex="-1"></a>glm_mod_x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1960</span>, <span class="at">to =</span> <span class="dv">2010</span>, <span class="at">length.out =</span> <span class="dv">100</span>)</span>
<span id="cb64-14"><a href="lesson-7-exploratory-analysis.html#cb64-14" aria-hidden="true" tabindex="-1"></a>glm_mod_y <span class="ot">&lt;-</span> <span class="fu">predict</span>(glm_mod, <span class="fu">list</span>(<span class="at">YEAR =</span> glm_mod_x), <span class="at">type =</span> <span class="st">&quot;response&quot;</span>)</span>
<span id="cb64-15"><a href="lesson-7-exploratory-analysis.html#cb64-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-16"><a href="lesson-7-exploratory-analysis.html#cb64-16" aria-hidden="true" tabindex="-1"></a>mods <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">&quot;hist&quot;</span><span class="ot">=</span><span class="fu">list</span>(),</span>
<span id="cb64-17"><a href="lesson-7-exploratory-analysis.html#cb64-17" aria-hidden="true" tabindex="-1"></a>             <span class="st">&quot;mod&quot;</span> <span class="ot">=</span> <span class="fu">list</span>()</span>
<span id="cb64-18"><a href="lesson-7-exploratory-analysis.html#cb64-18" aria-hidden="true" tabindex="-1"></a>             )</span>
<span id="cb64-19"><a href="lesson-7-exploratory-analysis.html#cb64-19" aria-hidden="true" tabindex="-1"></a>mods_plots <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">&quot;hist&quot;</span><span class="ot">=</span><span class="fu">list</span>(),</span>
<span id="cb64-20"><a href="lesson-7-exploratory-analysis.html#cb64-20" aria-hidden="true" tabindex="-1"></a>                   <span class="st">&quot;mod&quot;</span> <span class="ot">=</span><span class="fu">list</span>()</span>
<span id="cb64-21"><a href="lesson-7-exploratory-analysis.html#cb64-21" aria-hidden="true" tabindex="-1"></a>                   )</span>
<span id="cb64-22"><a href="lesson-7-exploratory-analysis.html#cb64-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-23"><a href="lesson-7-exploratory-analysis.html#cb64-23" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">names</span>(to_plot<span class="sc">$</span>pct)){</span>
<span id="cb64-24"><a href="lesson-7-exploratory-analysis.html#cb64-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb64-25"><a href="lesson-7-exploratory-analysis.html#cb64-25" aria-hidden="true" tabindex="-1"></a>  hist_x <span class="ot">&lt;-</span> to_plot<span class="sc">$</span>YEAR[to_plot<span class="sc">$</span>YEAR <span class="sc">&lt;</span> <span class="dv">1950</span>]</span>
<span id="cb64-26"><a href="lesson-7-exploratory-analysis.html#cb64-26" aria-hidden="true" tabindex="-1"></a>mod_x <span class="ot">&lt;-</span> to_plot<span class="sc">$</span>YEAR[to_plot<span class="sc">$</span>YEAR <span class="sc">&gt;</span> <span class="dv">1950</span>]</span>
<span id="cb64-27"><a href="lesson-7-exploratory-analysis.html#cb64-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-28"><a href="lesson-7-exploratory-analysis.html#cb64-28" aria-hidden="true" tabindex="-1"></a>  mods<span class="sc">$</span>hist[[i]] <span class="ot">&lt;-</span> <span class="fu">lm</span>(pct[[i]] <span class="sc">~</span> YEAR, <span class="at">data =</span> to_plot[to_plot<span class="sc">$</span>YEAR <span class="sc">&lt;</span> <span class="dv">1950</span>,])</span>
<span id="cb64-29"><a href="lesson-7-exploratory-analysis.html#cb64-29" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb64-30"><a href="lesson-7-exploratory-analysis.html#cb64-30" aria-hidden="true" tabindex="-1"></a>  mods_plots<span class="sc">$</span>hist[[i]] <span class="ot">&lt;-</span> </span>
<span id="cb64-31"><a href="lesson-7-exploratory-analysis.html#cb64-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">data.frame</span>(<span class="st">&quot;x&quot;</span> <span class="ot">=</span> hist_x,</span>
<span id="cb64-32"><a href="lesson-7-exploratory-analysis.html#cb64-32" aria-hidden="true" tabindex="-1"></a>               <span class="st">&quot;y&quot;</span> <span class="ot">=</span> <span class="fu">predict</span>(mods<span class="sc">$</span>hist[[i]], </span>
<span id="cb64-33"><a href="lesson-7-exploratory-analysis.html#cb64-33" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">list</span>(<span class="at">YEAR =</span>hist_x), </span>
<span id="cb64-34"><a href="lesson-7-exploratory-analysis.html#cb64-34" aria-hidden="true" tabindex="-1"></a>                             <span class="at">type =</span> <span class="st">&quot;response&quot;</span>)</span>
<span id="cb64-35"><a href="lesson-7-exploratory-analysis.html#cb64-35" aria-hidden="true" tabindex="-1"></a>               )</span>
<span id="cb64-36"><a href="lesson-7-exploratory-analysis.html#cb64-36" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb64-37"><a href="lesson-7-exploratory-analysis.html#cb64-37" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb64-38"><a href="lesson-7-exploratory-analysis.html#cb64-38" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb64-39"><a href="lesson-7-exploratory-analysis.html#cb64-39" aria-hidden="true" tabindex="-1"></a>  mods<span class="sc">$</span>mod[[i]] <span class="ot">&lt;-</span> <span class="fu">lm</span>(pct[[i]] <span class="sc">~</span> YEAR, <span class="at">data =</span> to_plot[to_plot<span class="sc">$</span>YEAR <span class="sc">&gt;</span> <span class="dv">1950</span>,])</span>
<span id="cb64-40"><a href="lesson-7-exploratory-analysis.html#cb64-40" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb64-41"><a href="lesson-7-exploratory-analysis.html#cb64-41" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb64-42"><a href="lesson-7-exploratory-analysis.html#cb64-42" aria-hidden="true" tabindex="-1"></a>  mods_plots<span class="sc">$</span>mod[[i]] <span class="ot">&lt;-</span> </span>
<span id="cb64-43"><a href="lesson-7-exploratory-analysis.html#cb64-43" aria-hidden="true" tabindex="-1"></a>    <span class="fu">data.frame</span>(<span class="st">&quot;x&quot;</span> <span class="ot">=</span> mod_x,</span>
<span id="cb64-44"><a href="lesson-7-exploratory-analysis.html#cb64-44" aria-hidden="true" tabindex="-1"></a>               <span class="st">&quot;y&quot;</span> <span class="ot">=</span> <span class="fu">predict</span>(mods<span class="sc">$</span>mod[[i]], </span>
<span id="cb64-45"><a href="lesson-7-exploratory-analysis.html#cb64-45" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">list</span>(<span class="at">YEAR =</span>mod_x), </span>
<span id="cb64-46"><a href="lesson-7-exploratory-analysis.html#cb64-46" aria-hidden="true" tabindex="-1"></a>                             <span class="at">type =</span> <span class="st">&quot;response&quot;</span>)</span>
<span id="cb64-47"><a href="lesson-7-exploratory-analysis.html#cb64-47" aria-hidden="true" tabindex="-1"></a>               )</span>
<span id="cb64-48"><a href="lesson-7-exploratory-analysis.html#cb64-48" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="visualize-1" class="section level5 unnumbered hasAnchor">
<h5>Visualize<a href="lesson-7-exploratory-analysis.html#visualize-1" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="lesson-7-exploratory-analysis.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(to_plot<span class="sc">$</span>YEAR, to_plot<span class="sc">$</span>pct<span class="sc">$</span>n_extended, <span class="at">col =</span> <span class="fu">hsv</span>(.<span class="dv">95</span>, .<span class="dv">6</span>,.<span class="dv">8</span>), <span class="at">pch =</span> <span class="dv">16</span>, <span class="at">ylim =</span><span class="fu">c</span>(<span class="dv">0</span>,.<span class="dv">25</span>), <span class="at">bg =</span> <span class="st">&quot;grey&quot;</span>, <span class="at">xlab =</span> <span class="st">&quot;&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;pct of hhs with extended family&quot;</span>)</span>
<span id="cb65-2"><a href="lesson-7-exploratory-analysis.html#cb65-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-3"><a href="lesson-7-exploratory-analysis.html#cb65-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-4"><a href="lesson-7-exploratory-analysis.html#cb65-4" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(glm_hist_x,glm_hist_y, <span class="at">col =</span> <span class="fu">hsv</span>(.<span class="dv">95</span>, .<span class="dv">3</span>, <span class="dv">1</span>), <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb65-5"><a href="lesson-7-exploratory-analysis.html#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(glm_mod_x, glm_mod_y, <span class="at">col =</span> <span class="fu">hsv</span>(.<span class="dv">95</span>, .<span class="dv">3</span>, <span class="dv">1</span>), <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb65-6"><a href="lesson-7-exploratory-analysis.html#cb65-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-7"><a href="lesson-7-exploratory-analysis.html#cb65-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-8"><a href="lesson-7-exploratory-analysis.html#cb65-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-9"><a href="lesson-7-exploratory-analysis.html#cb65-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-10"><a href="lesson-7-exploratory-analysis.html#cb65-10" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(to_plot<span class="sc">$</span>YEAR,</span>
<span id="cb65-11"><a href="lesson-7-exploratory-analysis.html#cb65-11" aria-hidden="true" tabindex="-1"></a>       to_plot<span class="sc">$</span>pct<span class="sc">$</span>n_extended,</span>
<span id="cb65-12"><a href="lesson-7-exploratory-analysis.html#cb65-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">pch =</span> <span class="dv">23</span>,</span>
<span id="cb65-13"><a href="lesson-7-exploratory-analysis.html#cb65-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">bg =</span> <span class="fu">hsv</span>(.<span class="dv">95</span>,.<span class="dv">6</span>,.<span class="dv">8</span>))</span></code></pre></div>
</div>
</div>
<div id="even-more-detail---maybe-remove" class="section level4 unnumbered hasAnchor">
<h4>Even more DETAIL - maybe remove<a href="lesson-7-exploratory-analysis.html#even-more-detail---maybe-remove" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="lesson-7-exploratory-analysis.html#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ipums_view</span>(ddi)</span></code></pre></div>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="lesson-7-exploratory-analysis.html#cb67-1" aria-hidden="true" tabindex="-1"></a>  hhs <span class="ot">&lt;-</span> d2 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(RELATED <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">4200</span>, <span class="dv">4210</span>, <span class="dv">4211</span>, <span class="dv">4220</span>, <span class="dv">4500</span>, <span class="dv">4510</span>, <span class="dv">4600</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb67-2"><a href="lesson-7-exploratory-analysis.html#cb67-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb67-3"><a href="lesson-7-exploratory-analysis.html#cb67-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(YEAR, SERIAL) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">parent_test=</span><span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> <span class="fu">right_join</span>(hhs, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;YEAR&quot;</span>, <span class="st">&quot;SERIAL&quot;</span>)) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">parent_test=</span><span class="fu">if_else</span>(<span class="fu">is.na</span>(parent_test),<span class="cn">FALSE</span>,<span class="cn">TRUE</span>))</span>
<span id="cb67-4"><a href="lesson-7-exploratory-analysis.html#cb67-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-5"><a href="lesson-7-exploratory-analysis.html#cb67-5" aria-hidden="true" tabindex="-1"></a>  hhs <span class="ot">&lt;-</span> d2 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(RELATED <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">4100</span>, <span class="dv">4110</span>, <span class="dv">4120</span>, <span class="dv">4130</span>, <span class="dv">4300</span>, <span class="dv">4301</span>, <span class="dv">4302</span>)) <span class="sc">%&gt;%</span> <span class="fu">distinct</span>(YEAR, SERIAL) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">children_test=</span><span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> <span class="fu">right_join</span>(hhs, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;YEAR&quot;</span>, <span class="st">&quot;SERIAL&quot;</span>)) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">children_test=</span><span class="fu">if_else</span>(<span class="fu">is.na</span>(children_test),<span class="cn">FALSE</span>,<span class="cn">TRUE</span>))</span></code></pre></div>
<div id="parents-supporting-parents" class="section level5 unnumbered hasAnchor">
<h5>Parents Supporting Parents<a href="lesson-7-exploratory-analysis.html#parents-supporting-parents" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="lesson-7-exploratory-analysis.html#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(to_plot<span class="sc">$</span>YEAR, to_plot<span class="sc">$</span>pct<span class="sc">$</span>n_extended, <span class="at">col =</span> <span class="fu">hsv</span>(.<span class="dv">95</span>, .<span class="dv">6</span>,.<span class="dv">8</span>), <span class="at">pch =</span> <span class="dv">16</span>, <span class="at">ylim =</span><span class="fu">c</span>(<span class="dv">0</span>,.<span class="dv">25</span>), <span class="at">bg =</span> <span class="st">&quot;grey&quot;</span>, <span class="at">xlab =</span> <span class="st">&quot;&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;pct of hhs with extended family&quot;</span>)</span>
<span id="cb68-2"><a href="lesson-7-exploratory-analysis.html#cb68-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-3"><a href="lesson-7-exploratory-analysis.html#cb68-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-4"><a href="lesson-7-exploratory-analysis.html#cb68-4" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(glm_hist_x,glm_hist_y, <span class="at">col =</span> <span class="fu">hsv</span>(.<span class="dv">95</span>, .<span class="dv">3</span>, <span class="dv">1</span>), <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb68-5"><a href="lesson-7-exploratory-analysis.html#cb68-5" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(glm_mod_x, glm_mod_y, <span class="at">col =</span> <span class="fu">hsv</span>(.<span class="dv">95</span>, .<span class="dv">3</span>, <span class="dv">1</span>), <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb68-6"><a href="lesson-7-exploratory-analysis.html#cb68-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-7"><a href="lesson-7-exploratory-analysis.html#cb68-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-8"><a href="lesson-7-exploratory-analysis.html#cb68-8" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(mods_plots<span class="sc">$</span>hist<span class="sc">$</span>n_parent,<span class="at">col =</span> <span class="fu">hsv</span>(.<span class="dv">8</span>, .<span class="dv">3</span>,<span class="dv">1</span>), <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb68-9"><a href="lesson-7-exploratory-analysis.html#cb68-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-10"><a href="lesson-7-exploratory-analysis.html#cb68-10" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(mods_plots<span class="sc">$</span>mod<span class="sc">$</span>n_parent, <span class="at">col =</span> <span class="fu">hsv</span>(.<span class="dv">8</span>, .<span class="dv">3</span>,<span class="dv">1</span>), <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb68-11"><a href="lesson-7-exploratory-analysis.html#cb68-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-12"><a href="lesson-7-exploratory-analysis.html#cb68-12" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(to_plot<span class="sc">$</span>YEAR,</span>
<span id="cb68-13"><a href="lesson-7-exploratory-analysis.html#cb68-13" aria-hidden="true" tabindex="-1"></a>       to_plot<span class="sc">$</span>pct<span class="sc">$</span>n_parent,</span>
<span id="cb68-14"><a href="lesson-7-exploratory-analysis.html#cb68-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">pch =</span> <span class="dv">23</span>,</span>
<span id="cb68-15"><a href="lesson-7-exploratory-analysis.html#cb68-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">bg =</span> <span class="fu">hsv</span>(.<span class="dv">8</span>, .<span class="dv">6</span>,.<span class="dv">8</span>))</span>
<span id="cb68-16"><a href="lesson-7-exploratory-analysis.html#cb68-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-17"><a href="lesson-7-exploratory-analysis.html#cb68-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-18"><a href="lesson-7-exploratory-analysis.html#cb68-18" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(to_plot<span class="sc">$</span>YEAR,</span>
<span id="cb68-19"><a href="lesson-7-exploratory-analysis.html#cb68-19" aria-hidden="true" tabindex="-1"></a>       to_plot<span class="sc">$</span>pct<span class="sc">$</span>n_extended,</span>
<span id="cb68-20"><a href="lesson-7-exploratory-analysis.html#cb68-20" aria-hidden="true" tabindex="-1"></a>       <span class="at">pch =</span> <span class="dv">23</span>,</span>
<span id="cb68-21"><a href="lesson-7-exploratory-analysis.html#cb68-21" aria-hidden="true" tabindex="-1"></a>       <span class="at">bg =</span> <span class="fu">hsv</span>(.<span class="dv">95</span>,.<span class="dv">6</span>,.<span class="dv">8</span>))</span></code></pre></div>
</div>
<div id="parents-supporting-extended-children" class="section level5 unnumbered hasAnchor">
<h5>Parents Supporting (extended) children<a href="lesson-7-exploratory-analysis.html#parents-supporting-extended-children" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="lesson-7-exploratory-analysis.html#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(to_plot<span class="sc">$</span>YEAR, to_plot<span class="sc">$</span>pct<span class="sc">$</span>n_extended, <span class="at">col =</span> <span class="fu">hsv</span>(.<span class="dv">95</span>, .<span class="dv">6</span>,.<span class="dv">8</span>), <span class="at">pch =</span> <span class="dv">16</span>, <span class="at">ylim =</span><span class="fu">c</span>(<span class="dv">0</span>,.<span class="dv">25</span>), <span class="at">bg =</span> <span class="st">&quot;grey&quot;</span>, <span class="at">xlab =</span> <span class="st">&quot;&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;pct of hhs with extended family&quot;</span>)</span>
<span id="cb69-2"><a href="lesson-7-exploratory-analysis.html#cb69-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-3"><a href="lesson-7-exploratory-analysis.html#cb69-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-4"><a href="lesson-7-exploratory-analysis.html#cb69-4" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(glm_hist_x,glm_hist_y, <span class="at">col =</span> <span class="fu">hsv</span>(.<span class="dv">95</span>, .<span class="dv">3</span>, <span class="dv">1</span>), <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb69-5"><a href="lesson-7-exploratory-analysis.html#cb69-5" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(glm_mod_x, glm_mod_y, <span class="at">col =</span> <span class="fu">hsv</span>(.<span class="dv">95</span>, .<span class="dv">3</span>, <span class="dv">1</span>), <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb69-6"><a href="lesson-7-exploratory-analysis.html#cb69-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-7"><a href="lesson-7-exploratory-analysis.html#cb69-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-8"><a href="lesson-7-exploratory-analysis.html#cb69-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-9"><a href="lesson-7-exploratory-analysis.html#cb69-9" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(mods_plots<span class="sc">$</span>hist<span class="sc">$</span>n_children, <span class="at">col =</span> <span class="fu">hsv</span>(.<span class="dv">55</span>,.<span class="dv">3</span>,<span class="dv">1</span>), <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb69-10"><a href="lesson-7-exploratory-analysis.html#cb69-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-11"><a href="lesson-7-exploratory-analysis.html#cb69-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-12"><a href="lesson-7-exploratory-analysis.html#cb69-12" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(mods_plots<span class="sc">$</span>mod<span class="sc">$</span>n_children, <span class="at">col =</span> <span class="fu">hsv</span>(.<span class="dv">55</span>,.<span class="dv">3</span>,<span class="dv">1</span>), <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb69-13"><a href="lesson-7-exploratory-analysis.html#cb69-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-14"><a href="lesson-7-exploratory-analysis.html#cb69-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-15"><a href="lesson-7-exploratory-analysis.html#cb69-15" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(to_plot<span class="sc">$</span>YEAR,</span>
<span id="cb69-16"><a href="lesson-7-exploratory-analysis.html#cb69-16" aria-hidden="true" tabindex="-1"></a>       to_plot<span class="sc">$</span>pct<span class="sc">$</span>n_children,</span>
<span id="cb69-17"><a href="lesson-7-exploratory-analysis.html#cb69-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">pch =</span> <span class="dv">23</span>,</span>
<span id="cb69-18"><a href="lesson-7-exploratory-analysis.html#cb69-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">bg =</span> <span class="fu">hsv</span>(.<span class="dv">55</span>,.<span class="dv">6</span>,.<span class="dv">8</span>))</span>
<span id="cb69-19"><a href="lesson-7-exploratory-analysis.html#cb69-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-20"><a href="lesson-7-exploratory-analysis.html#cb69-20" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(to_plot<span class="sc">$</span>YEAR,</span>
<span id="cb69-21"><a href="lesson-7-exploratory-analysis.html#cb69-21" aria-hidden="true" tabindex="-1"></a>       to_plot<span class="sc">$</span>pct<span class="sc">$</span>n_extended,</span>
<span id="cb69-22"><a href="lesson-7-exploratory-analysis.html#cb69-22" aria-hidden="true" tabindex="-1"></a>       <span class="at">pch =</span> <span class="dv">23</span>,</span>
<span id="cb69-23"><a href="lesson-7-exploratory-analysis.html#cb69-23" aria-hidden="true" tabindex="-1"></a>       <span class="at">bg =</span> <span class="fu">hsv</span>(.<span class="dv">95</span>,.<span class="dv">6</span>,.<span class="dv">8</span>))</span></code></pre></div>
</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="lesson-6-introduction-to-ipums.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="lesosn-8-hypothesis-testing.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ehrlichd/stats_book 20-Unit2_outline.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
