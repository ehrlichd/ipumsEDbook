
# Week 2: Collecting Data


## Load the Data {-}


Thanks for filling out our simple survey! Below, we'll tabulate results. Make sure to update the `data_template.xlsx` file located in: `inst/unit1_data`


```{r}

dir_path <- file.path("inst","unit1_data")
survey_path <- file.path(dir_path, "data_template.xlsx")

data <- readxl::read_excel(survey_path)
```





# Access the Data {-}

What is `data`?? Below we call the `class()` function on `data` and see that it has 3 classes: 
  `tbl_df` , `tbl` , `data.frame`
  
The first two classes, `tbl_df, tbl` indicate it is a special kind of table, in the `tibble` format. In general, you can interact with these like a `matrix` or `data.frame` but they have additional features. 


```{r}
class(data)
```



We can call `colnames()` on data, like a regular `data.frame` or `matrix`. Or we can take advantage of the `tibble` structure and use the `glimpse()` function which provides a succinct summary of your data.

```{r}

colnames(data)

tibble::glimpse(data)

```





# Summarize Data {-}

## Continuous Data {-}

For continuous data, we often want to summarize our data by describing the **mean, median, and/or range**. **Mean** and **median** describe the *central tendency* of the data, while **range** describes the full extant of the data, as seen below. 

NOTE: if `NA` are present in the data, be sure to use the `na.rm=TRUE` flag for these operations.


```{r}

mean(data$Height_inches, na.rm = T)
median(data$Height_inches, na.rm = T)
range(data$Height_inches, na.rm = T)

```




## All in summary() {-}


**Mean**, **median**, and **range** will all be reported by calling `summary()` on a `numeric vector`, such as `Height_inches`. In addition, the lower and upper quartiles will be reported, along with the number of `NA` responses.


NOTE: `summary()` does NOT require special handling for `NA` values, in fact - it expects them!

```{r}
summary(data$Height_inches)
```




## Mode {-}

One common measure of data reported is the mode, or most frequently occuring value. For whatever reason, this is not a default function in R, but we can easily write our own function like so:

```{r}

my_mode <- function(x){
  tt <- table(x) ## find frequencies
  tt <- tt[order(tt, decreasing = TRUE)] ## resort based on freq
  
  ## check number of modes
  max <- max(tt)
  n_max <- sum(tt==max)
  
  
  if(n_max > 1 ){
    warning("More than one mode detected")
    return(tt[tt==max])
  } else {
    ## return only the first value
    return(tt[1]) ## return whatever the highrst frequency is
  }

  
}

```


With this function, it's easy to find the **mode**


```{r}

my_mode(data$Height_inches)

```



# Visualizing Data {-}

The above summaries describe data with numbers, but we can also describe data visually.



## Continuous Data - Boxplots {-}


Univariate continuous data, like height, can be visualized using a box and whisker plot, which shows many of the components of summary:

  * the **median** is the black bar in the middle
  * the **quartiles** (25th and 75th percentiles) are represented by the extents of the boxes
  * The **range** is shown by the whiskers, with outliers shown indvidually, if needed.
  
  
  
```{r}
boxplot(data$Height_inches)
```


## Continuous Data - Histograms {-}

Continuous data, can also be broken into **bins** and plotted as a **histogram**. The `hist()` function will attempt to find the optimum number of bins for you, but you can specify a different number with the `breaks` argument.


```{r}
hist(data$Height_inches, main = "Histogram of Height", xlab = "Height (in)")
```




## Categorical Data {-}

Categorical data is already in discrete units. In general with categorical data, we want to count the **frequency** of unique values. There are many ways to do this, but one of the easiest is the `table()` function. Saving the results of the table to an object, `birth_freq`, allows you to save and print the results at any time.

```{r}

birth_freq <- table(data$Birth_Month)

birth_freq
```


We can also visualize our tabulated results using a **barplot** as below.


```{r}

barplot(birth_freq)

```








